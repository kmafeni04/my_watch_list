<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title><%= Page_title or "My Watch List" %></title>
    <link rel="icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/css/reset.css"/>
    <link rel="stylesheet" href="/static/css/utility.css">
    <link rel="stylesheet" href="/static/css/index.css"/>
    <link rel="stylesheet" href="/static/css/landing.css"/>
    <link rel="stylesheet" href="/static/css/shows.css">
    <link rel="stylesheet" href="/static/css/airing.css">
    <link rel="stylesheet" href="/static/css/comments.css">
    <link rel="stylesheet" href="https://www.nerdfonts.com/assets/css/webfont.css">
    <script src="/static/js/htmx(1.9.12).js"></script>
    <script src="/static/js/Alpinejs(3.14.0).js" defer></script>
  </head>
  <body hx-boost="true" class="height-max">
    <nav class="top-nav sticky width-max flex gap-s">
      <div class="top-nav__item flex justify-start width-100">
        <a href="<%= url_for("index") %>" hx-indicator="#loading">
          <h2>My Watch List</h2>
        </a>
      </div>
      <div class="top-nav__item flex-center gap-s width-100">
        <form
          hx-get="<%= url_for("search") %>"
          hx-target="body"
          hx-push-url="true"
          hx-indicator="#loading"
          class="search-form flex-center gap-xs"
        >
          <label for="search-input">Search:</label>
          <input
            id="search-input"
            value="<%= params.query or "" %>"
            class="input"
            type="search"
            name="query"
            required
          >
        </form>
        <a href="<%= url_for("airing") %>" hx-indicator="#loading">Airing</a>
        <% if session.current_user then %>
          <a href="<%= url_for("shows") %>" hx-indicator="#loading">My List</a>
          <a href="<%= url_for("settings") %>" hx-indicator="#loading">Settings</a>
        <% end %>
      </div>
      <div class="top-nav__item flex justify-end width-100">
        <% if session.current_user then %>
          <button
            hx-post="<%= url_for("logout") %>"
            hx-target="body"
            hx-push-url="true"
            hx-indicator="#loading"
            hx-confirm="Are you sure you would like to log out?"
            class="input btn"
          >Logout</button>
        <% else %>
          <button
            hx-get="<%= url_for("login") %>"
            hx-target="body"
            hx-push-url="true"
            hx-indicator="#loading"
            class="input btn"
          >Login</button>
        <% end %>
      </div>
    </nav>
    <div class="htmx-indicator loading loading__desktop" id="loading"></div>
    <main class="flex-col-center gap-xs padding-block-m">
      <% content_for("inner") %>
    </main>
  </body>
  <nav
    class="
      bottom-nav fixed width-max flex align-center justify-space-between gap-xs
    "
  >
    <a href="<%= url_for("index")%>" hx-indicator="#loading" title="Home"><i class="nf nf-fa-home"></i></a>
    <a href="<%= url_for("search") %>" hx-indicator="#loading" title="Search"><i class="nf nf-fa-magnifying_glass"></i></a>
    <a href="<%= url_for("airing") %>" hx-indicator="#loading" title="Airing"><i class="nf nf-md-television_play"></i></a>
    <% if session.current_user then %>
      <a href="<%= url_for("shows") %>" hx-indicator="#loading" title="My List"><i class="nf nf-fa-list"></i></a>
      <a href="<%= url_for("settings") %>" hx-indicator="#loading" title="Settings"><i class="nf nf-fa-gear"></i></a>
      <a
        href=""
        title="Logout"
        hx-post="<%= url_for("logout") %>"
        hx-target="body"
        hx-push-url="true"
        hx-indicator="#loading"
        hx-confirm="Are you sure you would like to log out?"
      ><i class="nf nf-md-logout"></i></a>
    <% else %>
      <a href="<%= url_for("login") %>" hx-indicator="#loading" title="Login"><i class="nf nf-md-login"></i></a>
      <a href="<%= url_for("signup") %>" hx-indicator="#loading" title="Sign Up"><i class="nf nf-fa-user_plus"></i></a>
    <% end %>
    <div class="htmx-indicator loading loading__mobile" id="loading"></div>
  </nav>
</html>
